"""
快速参考指南
"""

# 通讯录管理系统 - 快速参考卡片

## 📋 命令速查表

### 基本命令
```
ADD <姓名> <电话> [备注]      添加联系人
DEL <姓名或电话>              删除联系人
FIND_NAME <名字前缀>          按名字查询
FIND_PHONE <电话前缀>         按电话查询
LIST                         列出所有
SAVE                         保存数据
STAT                         统计信息
HELP                         帮助信息
EXIT                         退出系统
```

## 🚀 快速开始

### 启动系统
```bash
python cli.py
```

### 基本操作示例
```
>>> ADD 张三 13800000001 工作电话
✓ 成功：已添加联系人 张三 (13800000001)

>>> FIND_NAME 张
找到 1 个联系人：张三 (13800000001)

>>> FIND_PHONE 138
找到 1 个联系人：张三 (13800000001)

>>> LIST
共 1 个联系人

>>> DEL 13800000001
✓ 成功：已删除 1 个联系人

>>> SAVE
✓ 成功：数据已保存到 contacts.json

>>> EXIT
```

## 🔑 关键特性

### ✅ 数据结构
- 双向链表：维护插入顺序
- 散列表：O(1)精确查询
- Trie树：O(m+k)前缀查询

### ✅ 约束规则
- 电话号码必须唯一
- 名字可以重复
- 必须有姓名和电话号码

### ✅ 持久化
- 自动加载contacts.json
- SAVE命令保存数据
- JSON格式便于调试

## 📊 性能数据

### 时间复杂度
| 操作 | 复杂度 |
|------|--------|
| 添加 | O(m) |
| 精确查询 | O(1) |
| 前缀查询 | O(m+k) |
| 列出所有 | O(n) |

### 加速倍数（10,000条记录）
- 名字查询：1.1x ~ 2.0x
- 电话查询（完整扫描）：较小

## 🧪 测试

### 运行单元测试
```bash
python test_units.py
```
✅ 16个测试用例，100%通过

### 运行性能测试
```bash
python test_performance.py
```
✅ 三种规模（1K/5K/10K）完整对比

### 运行演示
```bash
python demo.py
```
✅ 10个功能场景展示

## 📁 文件说明

| 文件 | 说明 |
|------|------|
| contact.py | 核心类和数据结构 |
| cli.py | 命令行界面 |
| test_units.py | 功能测试 |
| test_performance.py | 性能测试 |
| demo.py | 功能演示 |
| README.md | 详细文档 |
| contacts.json | 数据文件（自动生成） |

## 🎯 常见问题

**Q: 如何恢复已删除的数据？**
A: 系统没有恢复功能。删除前请先用SAVE保存备份。

**Q: 可以添加相同的电话号码吗？**
A: 不能，电话号码必须唯一。

**Q: 可以有重名联系人吗？**
A: 可以，只要电话号码不同。

**Q: 数据保存到哪里？**
A: contacts.json文件，与脚本同目录。

**Q: 关闭程序后数据丢失吗？**
A: 不会，只要运行过SAVE命令。程序启动会自动加载。

**Q: 支持批量导入吗？**
A: 不支持，目前只能逐个ADD。可以修改代码支持。

## 💡 优化建议

### 性能优化
1. 删除操作：从O(n)优化为O(1)
   - 额外记录node引用

2. 大规模查询
   - 添加缓存机制

3. 内存节省
   - 禁用不需要的索引

### 功能扩展
1. 支持模糊查询
2. 支持多字段查询
3. 支持数据导出
4. 支持分组管理

## 🔗 相关资源

- Python数据结构：list, dict, set
- 树结构：Trie树应用
- 哈希表：散列函数和冲突处理
- 链表：双向链表实现

## 📝 更新日志

### v1.0 (2025-12-29)
✅ 完整实现所有核心功能
✅ 16个测试用例通过
✅ 性能基准完成
✅ 文档和演示完成

---

## 快速命令模板

```python
# 在Python中使用系统
from contact import ContactSystem

# 创建系统
system = ContactSystem(use_index=True)

# 添加联系人
system.add_contact("张三", "13800000001", "工作")

# 查询
results = system.find_by_name("张")
results = system.find_by_phone("138")

# 删除
system.del_contact("13800000001")

# 保存
system.save_to_file()
```

---

**最后更新**：2025年12月29日
**版本**：1.0
**状态**：完成 ✅
